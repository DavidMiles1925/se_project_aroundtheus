!function(){"use strict";var e=class{constructor(e,t){this._settings=e,this._formElement=t}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._settings.inactiveButtonClass)):(this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.remove(this._settings.inactiveButtonClass))}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._fieldsetElement.querySelector(`.${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_handleInputChange(e){this._checkInputValidity(e),this._toggleButtonState()}_setEventListeners(){this._inputList=[...this._fieldsetElement.querySelectorAll(this._settings.inputSelector)],this._buttonElement=this._fieldsetElement.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>this._handleInputChange(e)))}))}enableValidation(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._fieldsetElement=this._formElement.querySelector(this._settings.formFieldsetSelector),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};const t={formSelector:".form",formFieldsetSelector:".form__fieldset",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};const s=document.querySelector(".body");var r=class{constructor(e){this._popupElement=e,this._closeButton=this._popupElement.querySelector(".modal__close-button"),this._handleEscCloseBound=this._handleEscClose.bind(this),this._handleRemoteClickCloseBound=this._handleRemoteClickClose.bind(this),this._closePopupBound=this.close.bind(this)}open(){s.classList.remove("preload"),this._popupElement.classList.add("modal_open"),this._setEventListeners()}close(){this._popupElement.classList.remove("modal_open"),this._removeEventListeners()}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleRemoteClickClose(e){e.target===e.currentTarget&&this.close()}_setEventListeners(){document.addEventListener("keydown",this._handleEscCloseBound),this._popupElement.addEventListener("mousedown",this._handleRemoteClickCloseBound),this._closeButton.addEventListener("click",this._closePopupBound)}_removeEventListeners(){document.removeEventListener("keydown",this._handleEscCloseBound),this._popupElement.removeEventListener("mousedown",this._handleRemoteClickCloseBound),this._closeButton.removeEventListener("click",this._closePopupBound)}};var i=class extends r{constructor(e,t){var s,r,i;super(e),s=this,i=e=>{e.preventDefault();const t=this._getInputValues();this._onSubmit(t)},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_handleSubmit"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._onSubmit=t,this._formSelector=this._popupElement.querySelector(".form"),this._submitButton=this._popupElement.querySelector(".form__submit-button"),this.currentButtonText=this._submitButton.textContent}_getInputValues(){const e=[...this._formSelector.querySelectorAll(".form__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}_setEventListeners(){super._setEventListeners(),this._formSelector.addEventListener("submit",this._handleSubmit)}_removeEventListeners(){super._removeEventListeners(),this._formSelector.removeEventListener("submit",this._handleSubmit)}close(){super.close(),this._popupElement.querySelector(".form").reset()}toggleIsSaving(e){this._submitButton.textContent=e?"Saving...":this.currentButtonText}};const n=document.querySelector(".modal_profile"),o=document.querySelector(".modal_add-card"),a=document.querySelector(".modal_profile-picture"),l=document.querySelector(".modal_display-image"),h=document.querySelector(".modal_confirm"),u=n.querySelector(".form"),c=o.querySelector(".form"),_=a.querySelector(".form"),d=document.querySelector(".profile"),m=d.querySelector(".profile__edit-button"),p=d.querySelector(".profile__add-button"),v=d.querySelector(".profile__image-button"),f=n.querySelector(".form__input_type_name"),g=n.querySelector(".form__input_type_about");let S;const E=new class{constructor(e,t){var s,r,i;s=this,i=e=>e.ok?e.json():(console.log(`Error: ${e.status}`),Promise.reject(`Error: ${e.status}`)),(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_processServerResponse"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._baseURL=e,this._authToken=t,this._headers={authorization:t,"Content-Type":"application/json"}}getInitialCards(){return fetch(`${this._baseURL}/cards`,{method:"GET",headers:this._headers}).then(this._processServerResponse)}getUserInfo(){return fetch(`${this._baseURL}/users/me`,{method:"GET",headers:this._headers}).then(this._processServerResponse)}getApiInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()]).then(this._processServerResponse)}setUserInfo(e){return fetch(`${this._baseURL}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._processServerResponse)}setAvatar(e){return fetch(`${this._baseURL}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._processServerResponse)}addCard(e){return fetch(`${this._baseURL}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link,likes:e.likes})}).then(this._processServerResponse)}deleteCard(e){return fetch(`${this._baseURL}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._processServerResponse)}addLike(e){return fetch(`${this._baseURL}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._processServerResponse)}removeLike(e){return fetch(`${this._baseURL}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._processServerResponse)}}("https://around.nomoreparties.co/v1/group-12","cd0a9a45-f29d-487c-ac51-4b9d290460ac"),b=new class{constructor(e,t){this._renderer=e,this._cardsDisplayed=document.querySelector(t)}renderItems(e){e.forEach((e=>{const t=this._renderer(e);this._cardsDisplayed.append(t)}))}addItem(e){const t=this._renderer(e);this._cardsDisplayed.prepend(t)}}((function(e){return new class{constructor(e,t,s,r,i,n){this._name=e.name,this._link=e.link,this._alt=e.name,this._likes=e.likes,this._id=e._id,this._ownerId=e.owner._id,this._userId=n,this._cardSelector=t,this._handleLike=s,this._handleImageClick=r,this._deleteCard=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getCardElement(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardText=this._element.querySelector(".card__title"),this._cardLikes=this._element.querySelector(".card__likes"),this._cardText.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._alt,this._cardLikes.textContent=this._likes.length,this._heartButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._imageButton=this._element.querySelector(".card__image"),this._assignCardButtons(),this._ownerId!==this._userId&&this._deleteButton.remove(),this._renderLikes(),this._element}_assignCardButtons(){this._heartButton.addEventListener("click",(()=>this._handleLike(this))),this._deleteButton.addEventListener("click",(()=>this._deleteCard(this))),this._imageButton.addEventListener("click",(()=>this._handleImageClick(this._name,this._link)))}isLiked(){return this._likes.some((e=>this._userId===e._id))}updateLikes(e){this._likes=e,this._renderLikes()}_renderLikes(){this.isLiked()?this._heartButton.classList.add("card_liked"):this._heartButton.classList.remove("card_liked"),this._cardLikes.textContent=this._likes.length}handleDeleteLocalCard(){this._element.remove(),this._element=null}}(e,"#card",$,P,T,S).getCardElement()}),".cards"),y=new class{constructor(e,t,s){this._name=document.querySelector(e),this._about=document.querySelector(t),this._picture=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e,t){this._name.textContent=e,this._about.textContent=t}setProfilePicture(e){this._picture.src=e}}(".profile__title",".profile__description",".profile__image"),L=new class extends r{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__image"),this._modalImageDescription=this._popupElement.querySelector(".modal__image-desctription")}open(e,t){super.open(),this._image.alt=e,this._image.src=t,this._modalImageDescription.textContent=e}}(l,x),k=new i(n,(function(e){k.toggleIsSaving(!0),E.setUserInfo(e).then((()=>{y.setUserInfo(e.name,e.about),k.close()})).catch((e=>{console.log(`Error: ${e.status}`)})).finally((()=>{k.toggleIsSaving(!1)}))})),C=new i(o,(function(e){C.toggleIsSaving(!0),E.addCard(e).then((e=>{b.addItem(e)})).catch((e=>{console.log(`Error: ${e.status}`)})).finally((()=>{C.toggleIsSaving(!1),C.close()}))})),I=new i(a,x),B=new class extends r{constructor(e){super(e),this._formSelector=this._popupElement.querySelector(".form"),this._submitButton=this._popupElement.querySelector(".form__submit-button"),this.currentButtonText=this._submitButton.textContent}setEventListeners(){super._setEventListeners(),this._formSelector.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}setSubmit(e){this._handleSubmit=e}toggleIsSaving(e){this._submitButton.textContent=e?"Saving...":this.currentButtonText}}(h);B.setEventListeners();const q=new e(t,u),w=new e(t,c),R=new e(t,_);function x(e){I.toggleIsSaving(!0),E.setAvatar(e.avatar).catch((e=>{console.log(`Error: ${e.status}`)})),y.setProfilePicture(e.avatar),I.close(),I.toggleIsSaving(!1)}function P(e,t){L.open(e,t)}function T(e){B.open(),B.setSubmit((()=>{B.toggleIsSaving(!0),E.deleteCard(e._id).then((()=>{e.handleDeleteLocalCard(),B.close()})).catch((e=>{console.log(`Error: ${e.status}`)})).finally((()=>{B.toggleIsSaving(!0)}))}))}function $(e){e.isLiked()?E.removeLike(e._id).then((t=>e.updateLikes(t.likes))).catch((e=>{console.log(`Error: ${e.status}`)})):E.addLike(e._id).then((t=>e.updateLikes(t.likes))).catch((e=>{console.log(`Error: ${e.status}`)}))}q.enableValidation(),w.enableValidation(),R.enableValidation(),Promise.all([E.getUserInfo(),E.getInitialCards()]).then((e=>{let[t,s]=e;S=t._id,y.setProfilePicture(t.avatar),y.setUserInfo(t.name,t.about),b.renderItems(s)})).catch((e=>{console.log(e)})),m.addEventListener("click",(function(){!function(){const e=y.getUserInfo();f.value=e.name,g.value=e.about}(),k.open(),q.resetValidation()})),p.addEventListener("click",(function(){C.open(),w.resetValidation()})),v.addEventListener("click",(function(){I.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNuQ2dFLE9BQU9DLElBQ043RixRQUFRQyxJQUFLLFVBQVM0RixFQUFJM0YsU0FBUyxHQUczQyxDQTFHQW1HLEVBQXlCdEssbUJBQ3pCd0ssRUFBd0J4SyxtQkFDeEJ5SyxFQUEwQnpLLG1CQTRIMUJvRSxRQUFRYyxJQUFJLENBQUN2QixFQUFJcUIsY0FBZXJCLEVBQUllLG9CQUNqQ0ksTUFBSyxJQUE2QixJQUEzQjRGLEVBQVVDLEdBQVksRUFDNUJqSCxFQUFTZ0gsRUFBU3ZELElBQ2xCK0IsRUFBV0ksa0JBQWtCb0IsRUFBU2hGLFFBQ3RDd0QsRUFBVy9ELFlBQVl1RixFQUFTcEksS0FBTW9JLEVBQVNsRixPQUMvQ1MsRUFBWUssWUFBWXFFLEVBQVksSUFFckNkLE9BQU9DLElBQ043RixRQUFRQyxJQUFJNEYsRUFBSSxJQWJsQnpHLEVBQWtCdEQsaUJBQWlCLFNBL0dyQyxZQU5BLFdBQ0UsTUFBTTZLLEVBQVcxQixFQUFXbEUsY0FDNUJ4QixFQUFhakIsTUFBUXFJLEVBQVN0SSxLQUM5Qm1CLEVBQWNsQixNQUFRcUksRUFBU3BGLEtBQ2pDLENBR0VxRixHQUNBbEIsRUFBZ0J4SSxPQUNoQm1KLEVBQXlCbEssaUJBQzNCLElBNEdFa0QsRUFBY3ZELGlCQUFpQixTQTFHakMsV0FDRWlLLEVBQWU3SSxPQUNmcUosRUFBd0JwSyxpQkFDMUIsSUF3R0VtRCxFQUFtQnhELGlCQUFpQixTQXRHdEMsV0FDRW1LLEVBQWlCL0ksTUFDbkIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29uc3RhbnRzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvdXRpbHMvQVBJLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2ZpZWxkc2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUlucHV0Q2hhbmdlKGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9maWVsZHNldEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZmllbGRzZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRDaGFuZ2UoaW5wdXRFbGVtZW50KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZmllbGRzZXRFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3MuZm9ybUZpZWxkc2V0U2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJjb25zdCBhdXRoVG9rZW4gPSBcImNkMGE5YTQ1LWYyOWQtNDg3Yy1hYzUxLTRiOWQyOTA0NjBhY1wiO1xyXG5jb25zdCBiYXNlVVJMID0gXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCI7XHJcblxyXG5jb25zdCBkYXZpZEltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy9kYXZpZC5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcclxuXHJcbmNvbnN0IGNhcmRzRGlzcGxheWVkID0gXCIuY2FyZHNcIjtcclxuXHJcbmNvbnN0IGNvbmZpZ1ZhbGlkYXRlID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGZvcm1GaWVsZHNldFNlbGVjdG9yOiBcIi5mb3JtX19maWVsZHNldFwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuY29uc3QgY29uZmlnQ2xvc2UgPSB7XHJcbiAgY2xvc2VCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiLFxyXG4gIG1vZGFsT3ZlcmxheVNlbGVjdG9yOiBcIi5tb2RhbFwiLFxyXG4gIG1vZGFsQ29udGFpbmVyTGlzdDogXCIubW9kYWxfX2NvbnRhaW5lclwiLFxyXG59O1xyXG5cclxuY29uc3QgY29uZmlnVXNlciA9IHtcclxuICB1c2VyTW9kYWw6IFwiLm1vZGFsX3Byb2ZpbGVcIixcclxuICBjdXJyZW50TmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBjdXJyZW50QWJvdXQ6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgbmV3TmFtZTogXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCIsXHJcbiAgbmV3QWJvdXQ6IFwiLmZvcm1fX2lucHV0X3R5cGVfYWJvdXRcIixcclxuICBwcm9maWxlUGljdHVyZTogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufTtcclxuXHJcbi8qY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiQm91bGRlciwgQ09cIixcclxuICAgIGxpbms6IGJvdWxkZXJJbWFnZSxcclxuICAgIGxpa2VzOiBbXSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiRG9oZW55IEJlYWNoLCBDQVwiLFxyXG4gICAgbGluazogZG9oZW55SW1hZ2UsXHJcbiAgICBsaWtlczogW10sXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkV1cmVrYSBTcHJpbmdzLCBBS1wiLFxyXG4gICAgbGluazogZXVyZWthSW1hZ2UsXHJcbiAgICBsaWtlczogW10sXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkZvcnQgTGF1ZGVyZGFsZSwgRkxcIixcclxuICAgIGxpbms6IGxhdWRlcmRhbGVJbWFnZSxcclxuICAgIGxpa2VzOiBbXSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTWVsdmVybiBMYWtlLCBLU1wiLFxyXG4gICAgbGluazogbWVsdmVybkltYWdlLFxyXG4gICAgbGlrZXM6IFtdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJSb3lhbCBHb3JnZSwgQ09cIixcclxuICAgIGxpbms6IHJveWFsSW1hZ2UsXHJcbiAgICBsaWtlczogW10sXHJcbiAgfSxcclxuXTsqL1xyXG5cclxuZXhwb3J0IHtcclxuICBjYXJkc0Rpc3BsYXllZCxcclxuICBjb25maWdWYWxpZGF0ZSxcclxuICBjb25maWdDbG9zZSxcclxuICBjb25maWdVc2VyLFxyXG4gIGF1dGhUb2tlbixcclxuICBiYXNlVVJMLFxyXG59O1xyXG4iLCJjb25zdCBib2R5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9keVwiKTtcclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVByZWxvYWQoKSB7XHJcbiAgYm9keUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInByZWxvYWRcIik7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHJlbW92ZVByZWxvYWQgfTtcclxuIiwiaW1wb3J0IHsgcmVtb3ZlUHJlbG9hZCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IHBvcHVwU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQm91bmQgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3RlQ2xpY2tDbG9zZUJvdW5kID0gdGhpcy5faGFuZGxlUmVtb3RlQ2xpY2tDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fY2xvc2VQb3B1cEJvdW5kID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHJlbW92ZVByZWxvYWQoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlblwiKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcclxuICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVtb3RlQ2xpY2tDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZUJvdW5kKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlZG93blwiLFxyXG4gICAgICB0aGlzLl9oYW5kbGVSZW1vdGVDbGlja0Nsb3NlQm91bmRcclxuICAgICk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xvc2VQb3B1cEJvdW5kKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQm91bmQpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2hhbmRsZVJlbW90ZUNsaWNrQ2xvc2VCb3VuZFxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZVBvcHVwQm91bmQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxjdG9yKTtcclxuICAgIHRoaXMuX29uU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5jdXJyZW50QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQgPSAoZXZlbnQpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9vblN1Ym1pdChpbnB1dFZhbHVlcyk7XHJcbiAgfTtcclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybUZpZWxkSW5wdXRzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKSxcclxuICAgIF07XHJcblxyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICBmb3JtRmllbGRJbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIikucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUlzU2F2aW5nKGlzU2F2aW5nKSB7XHJcbiAgICBpZiAoaXNTYXZpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHtcclxuICBjYXJkc0Rpc3BsYXllZCxcclxuICBjb25maWdWYWxpZGF0ZSxcclxuICBjb25maWdVc2VyLFxyXG4gIGF1dGhUb2tlbixcclxuICBiYXNlVVJMLFxyXG59IGZyb20gXCIuLi9jb25zdGFudHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQVBJLmpzXCI7XHJcblxyXG5jb25zdCBtb2RhbFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3Byb2ZpbGVcIik7XHJcbmNvbnN0IG1vZGFsQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfYWRkLWNhcmRcIik7XHJcbmNvbnN0IG1vZGFsUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfcHJvZmlsZS1waWN0dXJlXCIpO1xyXG5jb25zdCBtb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9kaXNwbGF5LWltYWdlXCIpO1xyXG5jb25zdCBtb2RhbENvbmZpcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2NvbmZpcm1cIik7XHJcblxyXG5jb25zdCBmb3JtUHJvZmlsZUVsZW1lbnQgPSBtb2RhbFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5jb25zdCBmb3JtQWRkQ2FyZEVsZW1lbnQgPSBtb2RhbEFkZENhcmQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5jb25zdCBmb3JtUGljdHVyZUVsZW1lbnQgPSBtb2RhbFBpY3R1cmUucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IHByb2ZpbGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBwcm9maWxlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IGNoYW5nZUF2YXRhckJ1dHRvbiA9IHByb2ZpbGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9faW1hZ2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbmNvbnN0IGZvcm1OYW1lVGV4dCA9IG1vZGFsUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiKTtcclxuY29uc3QgZm9ybUFib3V0VGV4dCA9IG1vZGFsUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfYWJvdXRcIik7XHJcblxyXG5jb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkXCI7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShiYXNlVVJMLCBhdXRoVG9rZW4pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihjcmVhdGVDYXJkLCBjYXJkc0Rpc3BsYXllZCk7XHJcblxyXG5jb25zdCB1c2VyT2JqZWN0ID0gbmV3IFVzZXJJbmZvKFxyXG4gIGNvbmZpZ1VzZXIuY3VycmVudE5hbWUsXHJcbiAgY29uZmlnVXNlci5jdXJyZW50QWJvdXQsXHJcbiAgY29uZmlnVXNlci5wcm9maWxlUGljdHVyZVxyXG4pO1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShtb2RhbEltYWdlLCBoYW5kbGVQaWN0dXJlU3VibWl0KTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKG1vZGFsUHJvZmlsZSwgaGFuZGxlUHJvZmlsZVN1Ym1pdCk7XHJcbmNvbnN0IGFkZFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0obW9kYWxBZGRDYXJkLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcclxuY29uc3QgY2hhbmdlQXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKG1vZGFsUGljdHVyZSwgaGFuZGxlUGljdHVyZVN1Ym1pdCk7XHJcblxyXG5jb25zdCBjb25maXJtRm9ybSA9IG5ldyBQb3B1cFdpdGhDb25maXJtKG1vZGFsQ29uZmlybSk7XHJcbmNvbmZpcm1Gb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWdWYWxpZGF0ZSxcclxuICBmb3JtUHJvZmlsZUVsZW1lbnRcclxuKTtcclxuY29uc3QgYWRkUHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWdWYWxpZGF0ZSxcclxuICBmb3JtQWRkQ2FyZEVsZW1lbnRcclxuKTtcclxuY29uc3QgY2hhbmdlQXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbmZpZ1ZhbGlkYXRlLFxyXG4gIGZvcm1QaWN0dXJlRWxlbWVudFxyXG4pO1xyXG5cclxuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkUHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcclxuICBjb25zdCB1c2VySW5mbyA9IHVzZXJPYmplY3QuZ2V0VXNlckluZm8oKTtcclxuICBmb3JtTmFtZVRleHQudmFsdWUgPSB1c2VySW5mby5uYW1lO1xyXG4gIGZvcm1BYm91dFRleHQudmFsdWUgPSB1c2VySW5mby5hYm91dDtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzcGxheUVkaXQoKSB7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlBZGQoKSB7XHJcbiAgYWRkUHJvZmlsZUZvcm0ub3BlbigpO1xyXG4gIGFkZFByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5Q2hhbmdlQXZhdGFyKCkge1xyXG4gIGNoYW5nZUF2YXRhckZvcm0ub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlU3VibWl0KGRhdGEpIHtcclxuICBlZGl0UHJvZmlsZUZvcm0udG9nZ2xlSXNTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckluZm8oZGF0YSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgdXNlck9iamVjdC5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xyXG4gICAgICBlZGl0UHJvZmlsZUZvcm0uY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGVkaXRQcm9maWxlRm9ybS50b2dnbGVJc1NhdmluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChkYXRhKSB7XHJcbiAgYWRkUHJvZmlsZUZvcm0udG9nZ2xlSXNTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZChkYXRhKVxyXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZERhdGEpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYWRkUHJvZmlsZUZvcm0udG9nZ2xlSXNTYXZpbmcoZmFsc2UpO1xyXG4gICAgICBhZGRQcm9maWxlRm9ybS5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBpY3R1cmVTdWJtaXQoZGF0YSkge1xyXG4gIGNoYW5nZUF2YXRhckZvcm0udG9nZ2xlSXNTYXZpbmcodHJ1ZSk7XHJcbiAgYXBpLnNldEF2YXRhcihkYXRhLmF2YXRhcikuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgfSk7XHJcbiAgdXNlck9iamVjdC5zZXRQcm9maWxlUGljdHVyZShkYXRhLmF2YXRhcik7XHJcbiAgY2hhbmdlQXZhdGFyRm9ybS5jbG9zZSgpO1xyXG4gIGNoYW5nZUF2YXRhckZvcm0udG9nZ2xlSXNTYXZpbmcoZmFsc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEaXNwbGF5SW1hZ2UobmFtZSwgbGluaykge1xyXG4gIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkKSB7XHJcbiAgY29uZmlybUZvcm0ub3BlbigpO1xyXG4gIGNvbmZpcm1Gb3JtLnNldFN1Ym1pdCgoKSA9PiB7XHJcbiAgICBjb25maXJtRm9ybS50b2dnbGVJc1NhdmluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlTG9jYWxDYXJkKCk7XHJcbiAgICAgICAgY29uZmlybUZvcm0uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGNvbmZpcm1Gb3JtLnRvZ2dsZUlzU2F2aW5nKHRydWUpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoY2FyZCkge1xyXG4gIGlmIChjYXJkLmlzTGlrZWQoKSkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5yZW1vdmVMaWtlKGNhcmQuX2lkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiBjYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcykpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZExpa2UoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmQpIHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlQ2FyZExpa2UsXHJcbiAgICBoYW5kbGVEaXNwbGF5SW1hZ2UsXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkLFxyXG4gICAgdXNlcklkXHJcbiAgKTtcclxuICByZXR1cm4gbmV3Q2FyZC5nZXRDYXJkRWxlbWVudCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQYWdlTGlzdGVuZXJzKCkge1xyXG4gIGVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaXNwbGF5RWRpdCk7XHJcbiAgYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGlzcGxheUFkZCk7XHJcbiAgY2hhbmdlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaXNwbGF5Q2hhbmdlQXZhdGFyKTtcclxufVxyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGluaXRpYWxEYXRhXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgdXNlck9iamVjdC5zZXRQcm9maWxlUGljdHVyZSh1c2VyRGF0YS5hdmF0YXIpO1xyXG4gICAgdXNlck9iamVjdC5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhpbml0aWFsRGF0YSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbnNldFBhZ2VMaXN0ZW5lcnMoKTtcclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihiYXNlVVJMLCBhdXRoVG9rZW4pIHtcclxuICAgIHRoaXMuX2Jhc2VVUkwgPSBiYXNlVVJMO1xyXG4gICAgdGhpcy5fYXV0aFRva2VuID0gYXV0aFRva2VuO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogYXV0aFRva2VuLFxyXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBfcHJvY2Vzc1NlcnZlclJlc3BvbnNlID0gKHJlcykgPT4ge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9O1xyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRBcGlJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKS50aGVuKFxyXG4gICAgICB0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2VcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YSxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXHJcbiAgICAgICAgbGlrZXM6IGRhdGEubGlrZXMsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtkYXRhfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvbGlrZXMvJHtkYXRhfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvbGlrZXMvJHtkYXRhfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NhcmRzRGlzcGxheWVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGRhdGEpIHtcclxuICAgIGRhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgIHRoaXMuX2NhcmRzRGlzcGxheWVkLmFwcGVuZChjYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9jYXJkc0Rpc3BsYXllZC5wcmVwZW5kKGNhcmQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlTGlrZSxcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBkZWxldGVDYXJkLFxyXG4gICAgdXNlcklkXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2FsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcblxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkID0gZGVsZXRlQ2FyZDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUZXh0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUZXh0LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX2FsdDtcclxuICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl9oZWFydEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcblxyXG4gICAgdGhpcy5fYXNzaWduQ2FyZEJ1dHRvbnMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2Fzc2lnbkNhcmRCdXR0b25zKCkge1xyXG4gICAgdGhpcy5faGVhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2UodGhpcykpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9kZWxldGVDYXJkKHRoaXMpKTtcclxuICAgIHRoaXMuX2ltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiB0aGlzLl91c2VySWQgPT09IGxpa2UuX2lkKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VzKGxpa2VzKSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJMaWtlcygpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9oZWFydEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9saWtlZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hlYXJ0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX2xpa2VkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIGhhbmRsZURlbGV0ZUxvY2FsQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lLCBhYm91dCwgcGljdHVyZSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XHJcbiAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXQpO1xyXG4gICAgdGhpcy5fcGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGljdHVyZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcblxyXG4gIHNldFByb2ZpbGVQaWN0dXJlKGRhdGEpIHtcclxuICAgIHRoaXMuX3BpY3R1cmUuc3JjID0gZGF0YTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlRGVzY3JpcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltYWdlLWRlc2N0cmlwdGlvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX21vZGFsSW1hZ2VEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5jdXJyZW50QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0KGlucHV0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBpbnB1dDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUlzU2F2aW5nKGlzU2F2aW5nKSB7XHJcbiAgICBpZiAoaXNTYXZpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtO1xyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0IiwiX2J1dHRvbkVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwicmVtb3ZlIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwiX2ZpZWxkc2V0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwiX2hhbmRsZUlucHV0Q2hhbmdlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZm9ybUZpZWxkc2V0U2VsZWN0b3IiLCJyZXNldFZhbGlkYXRpb24iLCJjb25maWdWYWxpZGF0ZSIsImZvcm1TZWxlY3RvciIsImJvZHlFbGVtZW50IiwiZG9jdW1lbnQiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZUJvdW5kIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVSZW1vdGVDbGlja0Nsb3NlQm91bmQiLCJfaGFuZGxlUmVtb3RlQ2xpY2tDbG9zZSIsIl9jbG9zZVBvcHVwQm91bmQiLCJjbG9zZSIsIm9wZW4iLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJrZXkiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwIiwicG9wdXBTZWxjdG9yIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJldmVudCIsImlucHV0VmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwiX29uU3VibWl0IiwiX2Zvcm1TZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJjdXJyZW50QnV0dG9uVGV4dCIsImZvcm1GaWVsZElucHV0cyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiX2hhbmRsZVN1Ym1pdCIsInJlc2V0IiwidG9nZ2xlSXNTYXZpbmciLCJpc1NhdmluZyIsIm1vZGFsUHJvZmlsZSIsIm1vZGFsQWRkQ2FyZCIsIm1vZGFsUGljdHVyZSIsIm1vZGFsSW1hZ2UiLCJtb2RhbENvbmZpcm0iLCJmb3JtUHJvZmlsZUVsZW1lbnQiLCJmb3JtQWRkQ2FyZEVsZW1lbnQiLCJmb3JtUGljdHVyZUVsZW1lbnQiLCJwcm9maWxlRWxlbWVudCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImNoYW5nZUF2YXRhckJ1dHRvbiIsImZvcm1OYW1lVGV4dCIsImZvcm1BYm91dFRleHQiLCJ1c2VySWQiLCJhcGkiLCJiYXNlVVJMIiwiYXV0aFRva2VuIiwicmVzIiwib2siLCJqc29uIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsIlByb21pc2UiLCJyZWplY3QiLCJfYmFzZVVSTCIsIl9hdXRoVG9rZW4iLCJfaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJ0aGVuIiwiX3Byb2Nlc3NTZXJ2ZXJSZXNwb25zZSIsImdldFVzZXJJbmZvIiwiZ2V0QXBpSW5mbyIsImFsbCIsInNldFVzZXJJbmZvIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJzZXRBdmF0YXIiLCJhdmF0YXIiLCJhZGRDYXJkIiwibGluayIsImxpa2VzIiwiZGVsZXRlQ2FyZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJlciIsImNsYXNzU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY2FyZHNEaXNwbGF5ZWQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJjYXJkIiwiYXBwZW5kIiwiYWRkSXRlbSIsInByZXBlbmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVMaWtlIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJfYWx0IiwiX2xpa2VzIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUxpa2UiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9kZWxldGVDYXJkIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldENhcmRFbGVtZW50IiwiX2VsZW1lbnQiLCJfY2FyZEltYWdlIiwiX2NhcmRUZXh0IiwiX2NhcmRMaWtlcyIsInNyYyIsImFsdCIsImxlbmd0aCIsIl9oZWFydEJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfaW1hZ2VCdXR0b24iLCJfYXNzaWduQ2FyZEJ1dHRvbnMiLCJfcmVuZGVyTGlrZXMiLCJpc0xpa2VkIiwibGlrZSIsInVwZGF0ZUxpa2VzIiwiaGFuZGxlRGVsZXRlTG9jYWxDYXJkIiwiaGFuZGxlQ2FyZExpa2UiLCJoYW5kbGVEaXNwbGF5SW1hZ2UiLCJoYW5kbGVEZWxldGVDYXJkIiwidXNlck9iamVjdCIsInBpY3R1cmUiLCJfYWJvdXQiLCJfcGljdHVyZSIsInNldFByb2ZpbGVQaWN0dXJlIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl9tb2RhbEltYWdlRGVzY3JpcHRpb24iLCJoYW5kbGVQaWN0dXJlU3VibWl0IiwiZWRpdFByb2ZpbGVGb3JtIiwiUG9wdXBXaXRoRm9ybSIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsImFkZFByb2ZpbGVGb3JtIiwiY2FyZERhdGEiLCJjaGFuZ2VBdmF0YXJGb3JtIiwiY29uZmlybUZvcm0iLCJzZXRFdmVudExpc3RlbmVycyIsInNldFN1Ym1pdCIsImVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRQcm9maWxlRm9ybVZhbGlkYXRvciIsImNoYW5nZUF2YXRhckZvcm1WYWxpZGF0b3IiLCJ1c2VyRGF0YSIsImluaXRpYWxEYXRhIiwidXNlckluZm8iLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9